
@{
    ViewBag.Title = "editTeacher";
    Layout = "~/Views/Shared/_adminlayout.cshtml";
}

<h2>editTeacher</h2>
<div class="row">
    <div class="col-lg-12">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">Vertical Form</h5>

                <!-- Vertical Form -->
                <form class="row g-3" method="post" enctype="multipart/form-data">
                    <div>
                        <img width="200" height="200" src="~/adminAssets/img/imgsrc/@ViewBag.teacher.address" />
                    </div>
                    <input type="number" value="@ViewBag.teacher.pkID" name="tid" style="display:none" />

                    <div class="col-12">
                        <label for="imgtitle" class="form-label">عنوان عکس</label>
                        <input type="text" class="form-control" name="imgtitle" value="@ViewBag.teacher.title">
                    </div>
                    <div class="col-12">
                        <label for="imgalt" class="form-label">نام جایگزین عکس</label>
                        <input type="text" class="form-control" name="imgalt" value="@ViewBag.teacher.alt">
                    </div>
                    <div class="col-12">
                        <label for="Name" class="form-label">نام</label>
                        <input type="text" class="form-control" name="Name" value="@ViewBag.teacher.Name">
                    </div>
                    <div class="col-12">
                        <label for="Family" class="form-label">نام خانوادگی</label>
                        <input type="text" class="form-control" name="Family" value="@ViewBag.teacher.Family">
                    </div>
                    <div class="col-12">
                        <label for="chf" class="form-label">انتخاب عکس</label>
                        <input type="file" class="form-control" name="chf">
                    </div>



                    <button type="submit" class="btn btn-success">ذخیره</button>
                    <a href="~/admin/teachers" class="btn btn-danger">بازگشت</a>
                    <p style="text-align:center">@ViewBag.m</p>
                </form>
            </div>
            <!-- Vertical Form -->

        </div>
    </div>



</div>
@section s{
    <script>
     

        $(document).ready(function () {
            $("form").submit(function (e) {
                var img = $(this).find('div').children('img');
                e.preventDefault();
                var formdata = new FormData($(this)[0]);
                var formdata2 = $(this).serialize();
               
                formdata.append("__RequestVerificationToken", token);
                sl();
                $.ajax({
                    url: "/admin/editTeacher", // Adjust with your Action and Controller names
                    type: 'POST',
                    data: formdata,
                    contentType: false, // Prevent jQuery from setting content-type header
                    processData: false, // Prevent jQuery from processing the data
                })
                    .done(function (res) {
                        if (res.status) {

                            swal("عملیات موفق", res.m, "success");
                            $(img).attr("src", `/adminAssets/img/imgsrc/${res.reff}`)
        window.location.reload();
                        }
                        else {
                            swal("عملیات ناموفق", res.m, "error");
                        }
                    })
                    .fail(function () {

                        fail();
                    })
                    .always(function () {
                        fl();
                    });
            });

        });
    </script>
    }